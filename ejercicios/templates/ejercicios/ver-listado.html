<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON y AJAX</title>
    
</head>
<body>
    
    <header>
        <h1> Lista de ejercicios, con JSON y AJAX</h1>
        <button id="boton"> Buscar info </button>
    </header>

    Aquí irá la lista con todos los ejercicios, mostrada con javascript:
    <div id = "informac"></div>




    <!-- ------------------------------ JavaScript ----------------------------- -->
    <script>
        var informac = document.getElementById("informac")

        var boton    = document.getElementById("boton");
        boton.addEventListener("click",pedir)

        //  * * * * * * * * * * * Pedir info a url * * * * * * * * * * *
        function pedir(){
            informac.innerHTML=""
            
            var miPedido = new XMLHttpRequest();
            miPedido.open('GET','/ejercicios/listado');

            miPedido.onload = function(){
                var misDatos = JSON.parse(miPedido.responseText);
                mostrarHTML(misDatos)
            };
            
            miPedido.send();
        }

        //  * * * * * * * * * * * Mostrar información obtenida en HTML * * * * * * * * * * *
        function mostrarHTML(datos){
            var cadenaHTML = "";

            for (i = 0 ; i < datos.length ; i++) {
                cadenaHTML += "<p>" + datos[i].titulo + ".</p>";  // va a mostrar [object], si no le pido un atributo específico
            }
            informac.insertAdjacentHTML('beforeend',cadenaHTML);
        }


    </script>
    <!-- ---------------------------- Fin JavaScript ---------------------------- -->

</body>
</html>

